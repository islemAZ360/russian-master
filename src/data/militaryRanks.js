export const MILITARY_RANKS = [
  {
    id: 'recruit',
    name: 'RECRUIT',
    title: 'Ù…ØªØ¯Ø±Ø¨',
    titleRu: 'ĞĞ¾Ğ²Ğ¾Ğ±Ñ€Ğ°Ğ½ĞµÑ†',
    xp: 0,
    icon: 'ğŸª–',
    color: '#808080',
    perks: [],
    abilities: [],
    description: 'Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø±ÙˆØ³ÙŠØ©',
    unlockMessage: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬ÙŠØ´ Ø§Ù„Ø±ÙˆØ³ÙŠ!'
  },
  {
    id: 'private',
    name: 'PRIVATE',
    title: 'Ø¬Ù†Ø¯ÙŠ',
    titleRu: 'Ğ ÑĞ´Ğ¾Ğ²Ğ¾Ğ¹',
    xp: 500,
    icon: 'ğŸ–ï¸',
    color: '#00FF00',
    perks: ['Ø¥Ø¶Ø§ÙØ© 10 Ø¨Ø·Ø§Ù‚Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹', 'Ø¨Ø·Ø§Ù‚Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +10%'],
    description: 'Ù„Ù‚Ø¯ Ø£ØªÙ‚Ù†Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª',
    unlockMessage: 'ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø¬Ù†Ø¯ÙŠ ÙÙŠ Ø§Ù„Ø¬ÙŠØ´ Ø§Ù„Ø±ÙˆØ³ÙŠ'
  },
  {
    id: 'corporal',
    name: 'CORPORAL',
    title: 'Ø¹Ø±ÙŠÙ',
    titleRu: 'Ğ•Ñ„Ñ€ĞµĞ¹Ñ‚Ğ¾Ñ€',
    xp: 1500,
    icon: 'â­',
    color: '#4CAF50',
    perks: ['Ø£Ù„Ø¹Ø§Ø¨ Ø­ØµØ±ÙŠØ©', 'Ø¯Ø±Ø¯Ø´Ø§Øª Ø®Ø§ØµØ©'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +15%', 'Ù…ÙƒØ§ÙØ¢Øª ÙŠÙˆÙ…ÙŠØ© Ù…Ø¶Ø§Ø¹ÙØ©'],
    description: 'Ù‚Ø§Ø¦Ø¯ ÙØ±ÙŠÙ‚ ØµØºÙŠØ±',
    unlockMessage: 'ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Ø¹Ø±ÙŠÙ! Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„ÙØ±ÙŠÙ‚ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù†'
  },
  {
    id: 'sergeant',
    name: 'SERGEANT',
    title: 'Ø±Ù‚ÙŠØ¨',
    titleRu: 'Ğ¡ĞµÑ€Ğ¶Ğ°Ğ½Ñ‚',
    xp: 3500,
    icon: 'ğŸ—ï¸',
    color: '#2196F3',
    perks: ['Ø¨Ø·Ø§Ù‚Ø§Øª Ø°Ù‡Ø¨ÙŠØ©', 'Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +20%', 'ØªØ¬Ø±Ø¨Ø© Ø¬Ù…Ø§Ø¹ÙŠØ© +25%'],
    description: 'Ù…Ø¯Ø±Ø¨ ÙˆÙ…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†',
    unlockMessage: 'Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø±Ù‚ÙŠØ¨! Ø¯ÙˆØ±Ùƒ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¬Ø¯Ø¯'
  },
  {
    id: 'lieutenant',
    name: 'LIEUTENANT',
    title: 'Ù…Ù„Ø§Ø²Ù…',
    titleRu: 'Ğ›ĞµĞ¹Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚',
    xp: 7500,
    icon: 'âš”ï¸',
    color: '#9C27B0',
    perks: ['ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø±Ø§Ù‚Ø¨Ø©', 'ØªØµÙ…ÙŠÙ… Ø±ØªØ¨Ø© Ù…Ø®ØµØµØ©'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +30%', 'Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© +50%'],
    description: 'Ø¶Ø§Ø¨Ø· ØµÙ Ù…Ø¹ ØµÙ„Ø§Ø­ÙŠØ§Øª ØªØ®Ø·ÙŠØ·',
    unlockMessage: 'ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Ù…Ù„Ø§Ø²Ù…! Ø§Ø¨Ø¯Ø£ ÙÙŠ Ø§Ù„ØªØ®Ø·ÙŠØ· Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª'
  },
  {
    id: 'captain',
    name: 'CAPTAIN',
    title: 'Ù†Ù‚ÙŠØ¨',
    titleRu: 'ĞšĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ½',
    xp: 15000,
    icon: 'ğŸ–ï¸',
    color: '#FF9800',
    perks: ['ØºØ±Ù Ù‚ÙŠØ§Ø¯Ø©', 'Ø¥Ø·Ù„Ø§Ù‚ Ø¨Ø« Ø¹Ø§Ù„Ù…ÙŠ'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +40%', 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ù…Ø¶Ø§Ø¹ÙØ©'],
    description: 'Ù‚Ø§Ø¦Ø¯ ÙˆØ­Ø¯Ø© Ù…Ø³ØªÙ‚Ù„Ø©',
    unlockMessage: 'Ù†Ù‚ÙŠØ¨ Ø§Ù„Ø¬ÙŠØ´! Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ­Ø¯Ø© Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙƒ'
  },
  {
    id: 'major',
    name: 'MAJOR',
    title: 'Ø±Ø§Ø¦Ø¯',
    titleRu: 'ĞœĞ°Ğ¹Ğ¾Ñ€',
    xp: 30000,
    icon: 'ğŸ…',
    color: '#FF5722',
    perks: ['ØµÙ„Ø§Ø­ÙŠØ§Øª Ø´Ø¨Ù‡ Ø¥Ø¯Ø§Ø±ÙŠØ©', 'ØªØ­Ù„ÙŠÙ„ Ø¥Ø­ØµØ§Ø¦ÙŠ Ù…ØªÙ‚Ø¯Ù…'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +50%', 'ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© +75%'],
    description: 'Ø¶Ø§Ø¨Ø· ÙƒØ¨ÙŠØ± ÙÙŠ Ø§Ù„Ø§Ø³ØªØ®Ø¨Ø§Ø±Ø§Øª',
    unlockMessage: 'Ø±Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø®Ø§Ø¨Ø±Ø§Øª! Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø³Ø± Ù‚ÙˆØªÙƒ'
  },
  {
    id: 'colonel',
    name: 'COLONEL',
    title: 'Ø¹Ù‚ÙŠØ¯',
    titleRu: 'ĞŸĞ¾Ğ»ĞºĞ¾Ğ²Ğ½Ğ¸Ğº',
    xp: 60000,
    icon: 'ğŸ‘‘',
    color: '#F44336',
    perks: ['ÙƒÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª', 'ØªÙ…Ø«Ø§Ù„ ÙÙŠ Ø§Ù„ØµØ§Ù„Ø©'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +60%', 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ã—3'],
    description: 'Ù‚Ø§Ø¯Ø© Ø§Ù„Ø£Ù„ÙˆÙŠØ© ÙˆØ§Ù„ÙØ±Ù‚',
    unlockMessage: 'Ø¹Ù‚ÙŠØ¯ Ø§Ù„Ø¬ÙŠØ´! Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ ØªÙ†ØªØ¸Ø±Ùƒ'
  },
  {
    id: 'general',
    name: 'GENERAL',
    title: 'Ù„ÙˆØ§Ø¡',
    titleRu: 'Ğ“ĞµĞ½ĞµÑ€Ğ°Ğ»',
    xp: 120000,
    icon: 'ğŸ¦…',
    color: '#E91E63',
    perks: ['Ù†Ø¸Ø§Ù… Ø±ØªØ¨Ø© Ù…Ø®ØµØµØ©', 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +75%', 'ØªØ£Ø«ÙŠØ± Ø¹Ø§Ù„Ù…ÙŠ'],
    description: 'Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø¬ÙŠØ´ Ø¨Ø£ÙƒÙ…Ù„Ù‡',
    unlockMessage: 'Ø§Ù„Ù„ÙˆØ§Ø¡ Ø§Ù„Ø£Ø¹Ù„Ù‰! Ø§Ù„Ø¬ÙŠØ´ ØªØ­Øª Ù‚ÙŠØ§Ø¯ØªÙƒ'
  },
  {
    id: 'marshal',
    name: 'MARSHAL',
    title: 'Ù…Ø´ÙŠØ±',
    titleRu: 'ĞœĞ°Ñ€ÑˆĞ°Ğ»',
    xp: 250000,
    icon: 'ğŸ”¥',
    color: '#FFEB3B',
    perks: ['Ø£Ø³Ø·ÙˆØ±ÙŠ', 'Ù†ØµØ¨ ØªØ°ÙƒØ§Ø±ÙŠ'],
    abilities: ['Ø³Ø±Ø¹Ø© ØªØ¹Ù„Ù… +100%', 'Ø£Ø³Ø·ÙˆØ±Ø© Ø­ÙŠØ©'],
    description: 'Ø£Ø³Ø·ÙˆØ±Ø© Ø§Ù„Ø¬ÙŠØ´ Ø§Ù„Ø±ÙˆØ³ÙŠ',
    unlockMessage: 'Ø§Ù„Ù…Ø´ÙŠØ± Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ! Ø§Ø³Ù…Ùƒ ÙÙŠ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¬ÙŠØ´'
  },
  {
    id: 'supreme_commander',
    name: 'SUPREME COMMANDER',
    title: 'Ø§Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø£Ø¹Ù„Ù‰',
    titleRu: 'Ğ’ĞµÑ€Ñ…Ğ¾Ğ²Ğ½Ñ‹Ğ¹ Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ÑƒÑÑ‰Ğ¸Ğ¹',
    xp: 500000,
    icon: 'ğŸ‘ï¸',
    color: '#FFFFFF',
    perks: ['Ø¥Ù„Ù‡ÙŠ', 'ØªØ®Ù„ÙŠØ¯ Ø§Ù„Ø§Ø³Ù…'],
    abilities: ['Ù‚ÙˆØ© Ù„Ø§ Ù…ØªÙ†Ø§Ù‡ÙŠØ©', 'Ø³ÙŠØ·Ø±Ø© Ù…Ø·Ù„Ù‚Ø©'],
    description: 'Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø§Ù„Ù„ØºØ© Ø§Ù„Ø±ÙˆØ³ÙŠØ©',
    unlockMessage: 'Ø§Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø£Ø¹Ù„Ù‰! Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø£Ø³Ø·ÙˆØ±Ø© Ø®Ø§Ù„Ø¯Ø©'
  }
];

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
export const getCurrentRank = (xp) => {
  return MILITARY_RANKS.reduce((current, rank) => 
    xp >= rank.xp ? rank : current
  , MILITARY_RANKS[0]);
};

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
export const getNextRank = (xp) => {
  const currentRank = getCurrentRank(xp);
  const currentIndex = MILITARY_RANKS.indexOf(currentRank);
  return MILITARY_RANKS[currentIndex + 1] || null;
};

// Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯Ù… Ù„Ù„Ø±ØªØ¨Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
export const getRankProgress = (xp) => {
  const currentRank = getCurrentRank(xp);
  const nextRank = getNextRank(xp);
  
  if (!nextRank) return 100;
  
  const currentXP = xp - currentRank.xp;
  const neededXP = nextRank.xp - currentRank.xp;
  
  return Math.min(100, Math.round((currentXP / neededXP) * 100));
};

// Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ±Ù‚ÙŠØ©
export const getRankUpRewards = (oldRankId, newRankId) => {
  const rewards = {
    xp: 0,
    cards: [],
    perks: [],
    special: null
  };

  const rankIndex = MILITARY_RANKS.findIndex(r => r.id === newRankId);
  
  // Ù…ÙƒØ§ÙØ¢Øª XP
  rewards.xp = rankIndex * 500;
  
  // Ø¨Ø·Ø§Ù‚Ø§Øª Ø­ØµØ±ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø©
  if (rankIndex >= 2) { // Ø¹Ø±ÙŠÙ ÙÙ…Ø§ ÙÙˆÙ‚
    rewards.cards.push('Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©');
  }
  if (rankIndex >= 4) { // Ù…Ù„Ø§Ø²Ù… ÙÙ…Ø§ ÙÙˆÙ‚
    rewards.cards.push('Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ø§Ù„Ø¨Ù„Ø§ØªÙŠÙ†ÙŠØ©');
  }
  if (rankIndex >= 6) { // Ø¹Ù‚ÙŠØ¯ ÙÙ…Ø§ ÙÙˆÙ‚
    rewards.cards.push('Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø³ÙŠØ©');
  }
  
  // Ù…ÙƒØ§ÙØ¢Øª Ø®Ø§ØµØ©
  if (newRankId === 'captain') {
    rewards.special = 'Ù‚Ø¨Ø¹Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©';
  }
  if (newRankId === 'general') {
    rewards.special = 'Ø³ÙŠÙ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ';
  }
  if (newRankId === 'supreme_commander') {
    rewards.special = 'ØªØ§Ø¬ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø§Ù„Ø±ÙˆØ³ÙŠ';
  }

  return rewards;
};